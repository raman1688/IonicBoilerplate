!function(){"use strict";function t(){function t(t,n){function e(t){var e=d3.select(n[0]),r=c.size()[0],o=c.size()[1];e.select("svg").remove(),e.append("svg").attr("width",r).attr("height",o).append("g").attr("transform","translate("+r/2+","+o/2+")").selectAll("text").data(t).enter().append("text").on("click",function(t){a.onClick&&a.onClick(t)}).on("mouseover",function(){d3.select(this).transition().style("font-size",function(t){return 1.2*t.size+"px"}).attr("opacity",.5)}).on("mouseout",function(){d3.select(this).transition().style("font-size",function(t){return t.size+"px"}).attr("opacity",1)}).style("font-size",function(t){return t.size+"px"}).style("font-family","Impact").style("fill",function(t,n){return s(n)}).attr("text-anchor","middle").attr("cursor","pointer").transition().attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).text(function(t){return t.text})}function r(t,n,e){c.size([t,n]).words(e),c.start()}function o(){return a}function i(t,n){var e=angular.copy(t);angular.isUndefined(e.words)||angular.isUndefined(e.width)||angular.isUndefined(e.height)||r(e.width,e.height,e.words)}var a=this,s=d3.scale.category20(),c=d3.layout.cloud().padding(5).rotate(function(){return 60*~~(2*Math.random())}).font("Impact").fontSize(function(t){return t.size}).on("end",e);t.$watch(o,i,!0)}return{restrict:"E",scope:{words:"=",width:"=",height:"=",onClick:"="},template:"<div></div>",controller:["$scope","$element",t],controllerAs:"wordsCloudCtrl",bindToController:!0}}angular.module("angular-d3-word-cloud",[]).directive("wordCloud",[t])}();